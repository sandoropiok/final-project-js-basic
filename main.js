const readline = require("readline-sync");
const figlet = require("figlet");
const chalk = require("chalk");
const { Select } = require("enquirer");
// Import the number guessing game function
const playNumberGuessingGame = require("./numberGuessingGame");
// Import the riddle challenge function
const riddleChallenge = require("./riddleChallenge");

// Welcome message using ASCII art
console.log(
  chalk.redBright(`
          â–„   â–„   â–„â–„â–„ â–’â–ˆ        â–„â–„â–„  â–„â–„â–„â–„    â–„â–„â–„      â–ˆ     â–„â–„â–„  
         â–’â–ˆ â–„â–‘â–ˆ â–‘â–ˆ  â–’â–Œâ–’â–ˆ â–’â–“â–€â–€â–˜â–‘â–ˆ  â–’â–ˆâ–’â–“â–Œâ–“â–Œâ–“â–Œâ–‘â–ˆ  â–’â–Œ  â–„â–„â–„â–ˆâ–„â–„â––â–‘â–ˆ  â–’â–ˆ 
         â–’â–ˆâ–’â–ˆâ–‘â–ˆ â–’â–ˆâ–€â–€â–€ â–’â–ˆ â–’â–“â–„â–„â––â–‘â–’â–„â–„â–„â–›â–’â–“â–Œâ–‘â–’â–“â–Œâ–’â–ˆâ–€â–€â–€   â–‘â–‘â–’â–ˆ  â–‘â–‘â–’â–„â–„â–„â–› 
         â–‘â–’â–€ â–€  â–‘â–’â–€â–€â–€ â–“â–ˆ â–‘â–’â–‘â–‘  â–’â–‘  â–‘â–’â–‘  â–’â–‘ â–’â–“â–€â–€â–€ â–‘  â–‘â–’â–ˆ  â–‘ â–‘â–’â–‘â–‘
          â–‘  â–‘   â–‘    â–‘   â–‘  â–‘ â–‘    â–‘â–‘  â–‘   â–’â–‘      â–‘â–’â–ˆ  â–‘  â–‘â–‘  
                          â–‘         â–‘       â–‘        â–‘â–’     â–‘
  â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–„â–ˆâ–ˆâ–ˆâ–ˆâ–„ â–‘ â–„â–„â–„  â–‘    â–ˆâ–ˆâ–“â–ˆâ–ˆâ–ˆ  â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–‘ â–„â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“ â–ˆâ–ˆâ–‘ â–ˆâ–ˆ â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ           
  â–“â–ˆ   â–€ â–’â–ˆâ–ˆ    â–’ â–’â–ˆâ–ˆâ–€ â–€â–ˆ  â–’â–ˆâ–ˆâ–ˆâ–ˆâ–„    â–“â–ˆâ–ˆâ–‘  â–ˆâ–ˆâ–’â–“â–ˆ   â–€  â–‘ â–“  â–ˆâ–ˆâ–’ â–“â–’â–“â–ˆâ–ˆâ–‘ â–ˆâ–ˆâ–’â–“â–ˆ   â–€           
  â–’â–ˆâ–ˆâ–ˆ   â–‘ â–“â–ˆâ–ˆâ–„   â–’â–“â–ˆ    â–„ â–’â–ˆâ–ˆ  â–€â–ˆâ–„  â–“â–ˆâ–ˆâ–‘ â–ˆâ–ˆâ–“â–’â–’â–ˆâ–ˆâ–ˆ      â–’ â–“â–ˆâ–ˆâ–‘ â–’â–‘â–’â–ˆâ–ˆâ–€â–€â–ˆâ–ˆâ–‘â–’â–ˆâ–ˆâ–ˆ             
  â–’â–“â–ˆ  â–„   â–’   â–ˆâ–ˆâ–’â–’â–“â–“â–„ â–„â–ˆâ–ˆâ–’â–‘â–ˆâ–ˆâ–„â–„â–„â–„â–ˆâ–ˆ â–’â–ˆâ–ˆâ–„â–ˆâ–“â–’ â–’â–’â–“â–ˆ  â–„    â–‘ â–“â–ˆâ–ˆâ–“ â–‘ â–‘â–“â–ˆ â–‘â–ˆâ–ˆ â–’â–“â–ˆ  â–„           
  â–‘â–’â–ˆâ–ˆâ–ˆâ–ˆâ–’â–’â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–’â–’â–’ â–“â–ˆâ–ˆâ–ˆâ–€ â–‘ â–“â–ˆ   â–“â–ˆâ–ˆâ–’â–’â–ˆâ–ˆâ–’ â–‘  â–‘â–‘â–’â–ˆâ–ˆâ–ˆâ–ˆâ–’ â–‘   â–’â–ˆâ–ˆâ–’ â–‘ â–‘â–“â–ˆâ–’â–‘â–ˆâ–ˆâ–“â–‘â–’â–ˆâ–ˆâ–ˆâ–ˆâ–’          
  â–‘â–‘ â–’â–‘ â–‘â–’ â–’â–“â–’ â–’ â–‘â–‘ â–‘â–’ â–’  â–‘ â–’â–’   â–“â–’â–ˆâ–‘â–’â–“â–’â–‘ â–‘  â–‘â–‘â–‘ â–’â–‘ â–‘     â–’ â–‘â–‘    â–’ â–‘â–‘â–’â–‘â–’â–‘â–‘ â–’â–‘ â–‘          
   â–‘ â–‘  â–‘â–‘ â–‘â–’  â–‘ â–‘  â–‘  â–’     â–’   â–’â–’ â–‘â–‘â–’ â–‘      â–‘ â–‘  â–‘ â–‘     â–‘     â–’ â–‘â–’â–‘ â–‘ â–‘ â–‘  â–‘          
     â–‘   â–‘  â–‘  â–‘  â–‘          â–‘   â–’   â–‘â–‘          â–‘        â–‘       â–‘  â–‘â–‘ â–‘   â–‘             
     â–‘  â–‘      â–‘  â–‘ â–‘            â–‘  â–‘            â–‘  â–‘             â–‘  â–‘  â–‘   â–‘  â–‘                                                                       
      â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„  â–ˆ  â–‘ â–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–„    â–ˆ   â–„â–ˆâ–ˆâ–ˆâ–ˆ â–“â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–’â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–„    â–ˆ  â–â–ˆâ–ˆâ–Œ
      â–’â–ˆâ–ˆâ–€ â–ˆâ–ˆâ–Œ â–ˆâ–ˆ  â–“â–ˆâ–ˆâ–’ â–ˆâ–ˆ â–€â–ˆ   â–ˆ  â–ˆâ–ˆâ–’ â–€â–ˆâ–’â–“â–ˆ   â–€ â–’â–ˆâ–ˆâ–’  â–ˆâ–ˆâ–’ â–ˆâ–ˆ â–€â–ˆ   â–ˆ  â–â–ˆâ–ˆâ–Œ
      â–‘â–ˆâ–ˆ   â–ˆâ–Œâ–“â–ˆâ–ˆ  â–’â–ˆâ–ˆâ–‘â–“â–ˆâ–ˆ  â–€â–ˆ â–ˆâ–ˆâ–’â–’â–ˆâ–ˆâ–‘â–„â–„â–„â–‘â–’â–ˆâ–ˆâ–ˆ   â–’â–ˆâ–ˆâ–‘  â–ˆâ–ˆâ–’â–“â–ˆâ–ˆ  â–€â–ˆ â–ˆâ–ˆâ–’ â–â–ˆâ–ˆâ–Œ
      â–‘â–“â–ˆâ–„   â–Œâ–“â–“â–ˆ  â–‘â–ˆâ–ˆâ–‘â–“â–ˆâ–ˆâ–’  â–â–Œâ–ˆâ–ˆâ–’â–‘â–“â–ˆ  â–ˆâ–ˆâ–“â–’â–“â–ˆ  â–„ â–’â–ˆâ–ˆ   â–ˆâ–ˆâ–‘â–“â–ˆâ–ˆâ–’  â–â–Œâ–ˆâ–ˆâ–’ â–“â–ˆâ–ˆâ–’
      â–‘â–’â–ˆâ–ˆâ–ˆâ–ˆâ–“ â–’â–’â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–“ â–’â–ˆâ–ˆâ–‘   â–“â–ˆâ–ˆâ–‘â–‘â–’â–“â–ˆâ–ˆâ–ˆâ–€â–’â–‘â–’â–ˆâ–ˆâ–ˆâ–ˆâ–’â–‘ â–ˆâ–ˆâ–ˆâ–ˆâ–“â–’â–‘â–’â–ˆâ–ˆâ–‘   â–“â–ˆâ–ˆâ–‘ â–’â–„â–„ 
       â–’â–’â–“  â–’ â–‘â–’â–“â–’ â–’ â–’ â–‘ â–’â–‘   â–’ â–’  â–‘â–’   â–’ â–‘â–‘ â–’â–‘ â–‘â–‘ â–’â–‘â–’â–‘â–’â–‘ â–‘ â–’â–‘   â–’ â–’  â–‘â–€â–€â–’
       â–‘ â–’  â–’ â–‘â–‘â–’â–‘ â–‘ â–‘ â–‘ â–‘â–‘   â–‘ â–’â–‘  â–‘   â–‘  â–‘ â–‘  â–‘  â–‘ â–’ â–’â–‘ â–‘ â–‘â–‘   â–‘ â–’â–‘ â–‘  â–‘
       â–‘ â–‘  â–‘  â–‘â–‘â–‘ â–‘ â–‘    â–‘   â–‘ â–‘ â–‘ â–‘   â–‘    â–‘   â–‘ â–‘ â–‘ â–’     â–‘   â–‘ â–‘     â–‘
         â–‘       â–‘              â–‘       â–‘    â–‘  â–‘    â–‘ â–‘           â–‘  â–‘   
       â–‘                â–‘            â–‘                      â–‘            â–‘ 
`)
);
// Game description
console.log(
  chalk.greenBright(`
   ____________________________________________________________________  
  / \\                                                                  \\
 |   |                                                                  |
  \\__|     áƒ„Ïƒá¥™ â¨Î¹É³Ôƒ áƒ§Ïƒá¥™É¾âŸ†Ò½É¬â¨ ðœÉ¾Î±ÏÏÒ½Ôƒ Î¹É³ Î± ÔƒÎ±É¾Æ™, â²™áƒ§âŸ†ðœÒ½É¾Î¹Ïƒá¥™âŸ† Ôƒá¥™É³ÖÒ½ÏƒÉ³      |
     |     â¨Î¹É¬É¬Ò½Ôƒ É¯Î¹ðœÔ‹ É¾Î¹ÔƒÔƒÉ¬Ò½âŸ†, É¬ÏƒÖÎ¹ð›“ Ïá¥™â²â²É¬Ò½âŸ†, Î±É³Ôƒ É¬Ïƒð›“Æ™Ò½Ôƒ ÔƒÏƒÏƒÉ¾âŸ†.        |
     |     ã†œÔ‹Ò½ ÏƒÉ³É¬áƒ§ É¯Î±áƒ§ Ïƒá¥™ðœ Î¹âŸ† ðœÏƒ à´ŸÏƒÉ¬Ê‹Ò½ ðœÔ‹Ò½ ð›“Ô‹Î±É¬É¬Ò½É³ÖÒ½âŸ† áƒ§Ïƒá¥™ Ò½É³ð›“Ïƒá¥™É³ðœÒ½É¾.  |
     |     CÔ‹ÏƒÏƒâŸ†Ò½ É¯Î¹âŸ†Ò½É¬áƒ§, Î±É³Ôƒ ÏÒ½É¾Ô‹Î±Ïà´Ÿ áƒ§Ïƒá¥™'É¬É¬ Ò½âŸ†ð›“Î±ÏÒ½...                  |
     |     Æ‘Î±Î¹É¬, Î±É³Ôƒ áƒ§Ïƒá¥™'É¬É¬ ÃŸÒ½ ðœÉ¾Î±ÏÏÒ½Ôƒ â¨ÏƒÉ¾Ò½Ê‹Ò½É¾.                         |
     |                                                                  | 
     |     Ð£Ïƒá¥™É¾ ÊÏƒá¥™É¾É³Ò½áƒ§ ÃŸÒ½ÖÎ¹É³à´Ÿ É³ÏƒÉ¯. á—¯Î¹É¬É¬ áƒ§Ïƒá¥™ à´Ÿá¥™É¾Ê‹Î¹Ê‹Ò½ ðœÔ‹Ò½ Ôƒá¥™É³ÖÒ½ÏƒÉ³'à´Ÿ      |
     |     ðœÉ¯Î¹à´ŸðœÒ½Ôƒ ðœÉ¾Î¹Î±É¬à´Ÿ?                                              |
     |                                                                  |
     |   _______________________________________________________________|__
     \\_/__________________________________________________________________/ 
`)
);

// Prompt for the player's username
let username = readline.question(
  chalk.cyan(`      ð•Žð•™ð•’ð•¥ ð•šð•¤ ð•ªð• ð•¦ð•£ ð•Ÿð•’ð•žð•–, ð•“ð•£ð•’ð•§ð•– ð•’ð••ð•§ð•–ð•Ÿð•¥ð•¦ð•£ð•–ð•£â”`)
);

// Greet the player
console.log(
  chalk.yellowBright(
    `\n      ðš†ðšŽðš•ðšŒðš˜ðš–ðšŽ, ${username.toUpperCase()}! ð™»ðšŽðš ðšðš‘ðšŽ ðšðšžðš—ðšðšŽðš˜ðš—'ðšœ ðšŒðš‘ðšŠðš•ðš•ðšŽðš—ðšðšŽðšœ ðš‹ðšŽðšðš’ðš—...`
  )
);

// Function to display the room with two doors (left and right)
function showTwoDoorsRoom() {
  let roomArt = `
     \\                                                               /
      \\                                                             /
       \\ _________________________________________________________ /
        |     -_-                                             _-  |
        |_-_- _                                         -_- _-   -|     
        |          LEFT             _-  _--       ï¼²ï¼¥ï¼©ï¼§ï¼¨ï¼´    | 
        |      _____________         ,         _____________      |
        |     / /â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\\        (        / /â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\\     |
        |    / /â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\\       )       / /â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\\    |          
        |   / /â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\\     'U'     / /â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ\\   |
        |  /  |â–ˆâ–ˆâ–ˆâ–ˆâ–Œâ–“â–“â–“â–“â–“â–“â–â–ˆâ–ˆâ–ˆâ–ˆ\\ o   T   o /  |â–ˆâ–ˆâ–ˆâ–ˆâ–Œâ–“â–“â–“â–“â–“â–“â–â–ˆâ–ˆâ–ˆâ–ˆ\\  |
        |  |  |â–ˆâ–ˆâ–ˆâ–ˆâ–Œâ–“â–“â–“â–“â–“â–“â–â–ˆâ–ˆâ–ˆâ–ˆ|  .  |  .  |  |â–ˆâ–ˆâ–ˆâ–ˆâ–Œâ–“â–“â–“â–“â–“â–“â–â–ˆâ–ˆâ–ˆâ–ˆ|  |
        |  |  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|   . | .   |  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|  |
        |  |  |â–ˆâ–Œ#â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|    .|.    |  |â–ˆâ–Œ#â–â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|  |
        |  |  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|     |     |  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|  |  
        |  |  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|     !     |  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|  |
        |  |  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|        -  |  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|  |
        |  |  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|        -  |  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|  |
        |  |  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|        -  |  |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ|  |
        |  | /__--    __-- _   |   _- _ -  | /__--    __-- _   |  |
        |__|/__________________|___________|/__________________|__|
       /                                             _ -           \\
      /   -_- _ -             _- _---                       -_-  -_ \\
     /             __-                         _- _---               \\
`;

  console.log(chalk.greenBright(roomArt));
  console.log(
    chalk.whiteBright(
      `\n      ð—¬ð—¼ð˜‚ ð—³ð—¶ð—»ð—± ð˜†ð—¼ð˜‚ð—¿ð˜€ð—²ð—¹ð—³ ð—¶ð—» ð—® ð—±ð—¶ð—ºð—¹ð˜† ð—¹ð—¶ð˜ ð—¿ð—¼ð—¼ð—º ð˜„ð—¶ð˜ð—µ ð˜ð˜„ð—¼ ð—±ð—¼ð—¼ð—¿ð˜€:`
    )
  );
}

// Function to prompt the player to choose a direction using enquirer
function chooseDirection() {
  const prompt = new Select({
    name: "direction",
    message: "  ï¼£ï¼¨ï¼¯ï¼¯ï¼³ï¼¥ ï¼´ï¼¨ï¼¥ ï¼¤ï¼¯ï¼¯ï¼² ï¼ï¼ï¼",
    choices: ["  ï¼¬ï¼¥ï¼¦ï¼´", "  ï¼²ï¼¥ï¼©ï¼§ï¼¨ï¼´"],
  });

  prompt
    .run()
    .then((answer) => {
      if (answer === "  ï¼¬ï¼¥ï¼¦ï¼´") {
        console.log(
          chalk.yellow(
            "\n      ð™ð™ð™šð™§ð™šâœð™¨ ð™– ð™£ð™¤ð™©ð™š ð™¤ð™£ ð™©ð™ð™š ð™™ð™¤ð™¤ð™§: âœð™ð™¤ ð™¤ð™¥ð™šð™£ ð™©ð™ð™žð™¨ ð™™ð™¤ð™¤ð™§, ð™®ð™¤ð™ª ð™£ð™šð™šð™™ ð™©ð™¤ ð™œð™ªð™šð™¨ð™¨ ð™©ð™ð™š ð™˜ð™¤ð™§ð™§ð™šð™˜ð™© ð™£ð™ªð™¢ð™—ð™šð™§...âœ"
          )
        );
        playNumberGuessingGame(); // Call the number guessing game
      } else if (answer === "  ï¼²ï¼¥ï¼©ï¼§ï¼¨ï¼´") {
        console.log(
          chalk.yellow(
            "\n      ð—§ð—µð—²ð—¿ð—²âœð˜€ ð—® ð—¿ð—¶ð—±ð—±ð—¹ð—² ð—¼ð—» ð˜ð—µð—² ð—±ð—¼ð—¼ð—¿: âœð—§ð—¼ ð—¼ð—½ð—²ð—» ð˜ð—µð—¶ð˜€ ð—±ð—¼ð—¼ð—¿, ð—®ð—»ð˜€ð˜„ð—²ð—¿ ð˜ð—µð—² ð—³ð—¼ð—¹ð—¹ð—¼ð˜„ð—¶ð—»ð—´...âœ"
          )
        );
        riddleChallenge(); // Call the riddle challenge for the Right door
      }
    })
    .catch((error) => {
      console.log(chalk.red("Error with enquirer:", error));
    });
}

// Function to initiate the room and player choice
function startDungeonSection() {
  showTwoDoorsRoom(); // Show the new room with two doors
  chooseDirection(); // Ask the player to choose between Left and Right
}

startDungeonSection();
